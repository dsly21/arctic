{% load thumbnail %}
{% load embed_video_tags %}

<style>
    .thumb img {
        -webkit-filter: grayscale(0);
        filter: none;
        border-radius: 5px;
        background-color: #fff;
        border: 1px solid #ddd;
        padding: 5px;
    }

    .thumb img:hover {
        -webkit-filter: grayscale(1);
        filter: grayscale(1);
    }

    .thumb {
        padding: 5px;
    }
</style>

<article>
    <div class="container">
        <a href="{% url 'posts:post_detail' post.id %}" class="px-2 link-dark"><h3>{{ post.title }}</h3></a>

    </div>
    <ul style="padding-left: 0">
        <div class="container" style="margin-bottom: 1%">
            <b>Автор:</b> {{ post.author.username }} <br>
            <b>Дата публикации:</b> {{ post.pub_date|date:"d E Y" }}
        </div>

        {% thumbnail post.main_image "960x600" crop="center" upscale=True as im %}
            <img class="card-img my-3 rounded" src="{{ im.url }}" alt="Изображение" style="margin: 0;">
        {% endthumbnail %}

    </ul>
    <div class="container">
        <p>{{ post.text }}</p>
    </div>

    {% if post.get_post_images or post.get_post_video %}
        <div class="container">
            <div class="h4">Фото и видеоматериалы</div>
        </div>
    {% endif %}
    <div class="container">
        <div class="row">
            {% if post.get_post_images %}
                {% for image in post.get_post_images %}
                    <div class="col-lg-3 col-md-4 col-6 thumb">
                        <a data-fancybox="gallery{{ post.id }}" href="{{ image.image.url }}">
                            {% thumbnail image.image "960x700" crop="center" upscale=True as im %}
                                <img src="{{ im.url }}" class="d-block w-100" alt="...">
                            {% endthumbnail %}
                        </a>
                    </div>
                {% endfor %}
            {% endif %}
            {% if post.get_post_video %}
                <div class="col-lg-3 col-md-4 col-6 thumb">
                    <a data-fancybox="gallery" href="{{ post.get_post_video.video }}">
                        {% thumbnail post.get_post_video.video "960x700" crop="center" upscale=True as im %}
                            {% video post.get_post_video.video '100% x 100%' %}
                        {% endthumbnail %}
                    </a>
                </div>
            {% endif %}
        </div>
    </div>

</article>