{% load thumbnail %}
{% load embed_video_tags %}

<article>
    <div class="container">
        <h3>{{ post.title }}</h3>
    </div>
    <ul style="padding-left: 0">
        <div class="container" style="margin-bottom: 1%">
            <b>Автор:</b> {{ post.author.username }} <br>
            <b>Дата публикации:</b> {{ post.pub_date|date:"d E Y" }}
        </div>

{#        {% if post.get_post_images.count + post.get_post_video.count > 1 %}#}
{##}
{#        {% endif %}#}

{#        <div class="row">#}
{#            <div class="col-sm-6 col-md-4 col-xl">#}
{#                <img src="{{ post.get_post_images.image.url }}" class="img-fluid" alt="Responsive image">#}
{#            </div>#}
{#            <div class="col-sm-6 col-md-4 col-xl"> (2) </div>#}
{#            <div class="col-sm-6 col-md-4 col-xl"> (3) </div>#}
{#            <div class="col-sm-6 col-xl"> (4) </div>#}
{#            <div class="col-md-6 col-xl"> (5) </div>#}
{#        </div>#}

        <div id="carouselExampleFade{{ post.id }}" class="carousel slide carousel-fade container">
            <div class="carousel-inner">

                {% if post.get_post_images %}
                    {% for image in post.get_post_images %}
                        <div class="carousel-item active">
                            {% thumbnail image.image "960x339" crop="center" upscale=True as im %}
                                <img src="{{ image.image.url }}" class="d-block w-100" alt="...">
                            {% endthumbnail %}
                        </div>
                    {% endfor %}
                {% endif %}

                {% if post.get_post_video %}
                    <div class="carousel-item">
                        <div class="embed-responsive embed-responsive-16by9" style="height: 60vh">
                            {% video post.get_post_video.video '100% x 100%' %}
                        </div>
                    </div>
                {% endif %}

            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade{{ post.id }}"
                    data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Предыдущий</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade{{ post.id }}"
                    data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Следующий</span>
            </button>
        </div>

    </ul>
    <div class="container">
        <p>{{ post.text }}</p>
    </div>

</article>